<!DOCTYPE html>
<html>

<head>
    <title>Koara</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale = 1.0, user-scalable = no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link id="icon" rel="apple-touch-icon">
</head>

<body>
    <a id="button" href="googlecalendar://"></a>
    <script type="text/javascript">
        (function () {
            let koara = new Image();
            koara.onload = function () {
                let canvas = document.createElement("canvas");
                let ctx = canvas.getContext("2d");

                canvas.width = 188;
                canvas.height = 188;
                ctx.drawImage(koara, 0, 0, 188, 188);
                let base64 = canvas.toDataURL("image/png");

                var icon = document.getElementById("icon");

                icon.href = base64;
            }
            var pointer = Math.floor(Math.random() * 4);
            koara.src = "" + pointer + ".png";
        })();
        if (window.navigator.standalone) {
            //フルスクリーン時に起動する
            var clickEvent = document.createEvent('MouseEvents')
            clickEvent.initEvent('click', true, true)
            setTimeout(function () {
                button.dispatchEvent(clickEvent)
            }, 25)
        } else {
            //フルスクリーンじゃない時に起動する
            var button = document.getElementById("button")
            button.style["display"] = "none"
        }
    </script>
</body>

</html>